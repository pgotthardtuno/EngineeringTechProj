(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[522],{1187:(e,t,a)=>{Promise.resolve().then(a.bind(a,4096))},4096:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var s=a(5155),n=a(2115);let r=[{id:1,name:"Food"},{id:2,name:"Entertainment"},{id:3,name:"Bills"},{id:4,name:"Transportation"},{id:5,name:"Other"}],l=e=>{let{onExpenseAdded:t}=e,[a,l]=(0,n.useState)(""),[c,d]=(0,n.useState)(new Date),[i,o]=(0,n.useState)(0),[u,h]=(0,n.useState)(r[0].name),m=async e=>{e.preventDefault(),await fetch("/api/expenses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:0,description:a,date:c,cost:i,category:u})}),await t(),l(""),d(new Date),o(0),h(r[0].name)};return(0,s.jsxs)("form",{onSubmit:m,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"description",className:"form-label",children:"Description"}),(0,s.jsx)("input",{type:"text",id:"description",value:a,onChange:e=>l(e.target.value),className:"form-input"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"date",className:"form-label",children:"Date"}),(0,s.jsx)("input",{type:"date",id:"date",value:c.toISOString().split("T")[0],onChange:e=>d(new Date(e.target.value)),className:"form-input",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"cost",className:"form-label",children:"Cost"}),(0,s.jsx)("input",{type:"text",id:"cost",value:i,onChange:e=>{let t=e.target.value;isNaN(Number(t))&&""!==t||o(""===t?0:Number(t))},className:"form-input",required:!0,pattern:"^\\d*(\\.\\d+)?$"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"category",className:"form-label",children:"Category"}),(0,s.jsx)("select",{id:"category",value:u,onChange:e=>h(e.target.value),className:"form-select",required:!0,children:r.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.name))})]}),(0,s.jsx)("button",{type:"submit",className:"form-button",children:"Add Expense"})]})},c=e=>{let{expenseAdded:t,expenseDeleted:a,onExpenseDeleted:r,onExpenseAdded:l,selectedMonth:c}=e,[d,i]=(0,n.useState)([]),o=["January","February","March","April","May","June","July","August","September","October","November","December"];(0,n.useEffect)(()=>{(async()=>{let e=await fetch("/api/expenses");i((await e.json()).filter(e=>o[new Date(e.date).getMonth()]===c))})()},[t,a,c]);let u=async e=>{await fetch("/api/expenses?id=".concat(e),{method:"DELETE"}),r()};return(0,s.jsxs)("table",{className:"expense-table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Date"}),(0,s.jsx)("th",{children:"Description"}),(0,s.jsx)("th",{children:"Category"}),(0,s.jsx)("th",{children:"Cost"}),(0,s.jsx)("th",{children:"Delete"})]})}),(0,s.jsx)("tbody",{children:d.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:new Date(e.date).toLocaleDateString()}),(0,s.jsx)("td",{children:e.description}),(0,s.jsx)("td",{children:e.category}),(0,s.jsxs)("td",{children:["$",e.cost.toFixed(2)]}),(0,s.jsx)("td",{children:(0,s.jsx)("button",{onClick:()=>u(e.id),children:"Delete"})})]},e.id))})]})},d=e=>{let{selectedMonth:t}=e,[a,r]=(0,n.useState)([]),[l,c]=(0,n.useState)({}),[d,i]=(0,n.useState)({}),o=["January","February","March","April","May","June","July","August","September","October","November","December"];(0,n.useEffect)(()=>{(async()=>{let e=await fetch("/api/expenses");r(await e.json())})()},[]),(0,n.useEffect)(()=>{let e={},t={};a.forEach(a=>{let s=o[new Date(a.date).getMonth()];e[s]||(e[s]={},t[s]=0),e[s][a.category]||(e[s][a.category]=0),e[s][a.category]+=a.cost,t[s]+=a.cost}),c(e),i(t)},[a]);let u=e=>{let a=d[e]||0,n=l[e]||{};return(0,s.jsxs)("div",{className:"monthly-breakdown",children:[(0,s.jsx)("h4",{className:"monthly-breakdown-header",children:e}),(0,s.jsx)("ul",{children:Object.entries(n).map(n=>{let[r,l]=n;return(0,s.jsxs)("li",{children:[r,": ",a>0&&e===t?(l/a*100).toFixed(2):"0.00","%"]},r)})})]},e)};return(0,s.jsxs)("div",{className:"category-breakdowns",children:[(0,s.jsx)("h3",{className:"category-breakdowns-header",children:"Monthly Category Breakdowns"}),(0,s.jsx)("div",{className:"monthly-breakdowns-container",children:o.map(e=>u(e))})]})},i=e=>{let{expenses:t,selectedMonth:a}=e,[l,c]=(0,n.useState)({}),[d,i]=(0,n.useState)({}),o=["January","February","March","April","May","June","July","August","September","October","November","December"];(0,n.useEffect)(()=>{let e=localStorage.getItem("budgets");e&&c(JSON.parse(e))},[]),(0,n.useEffect)(()=>{localStorage.setItem("budgets",JSON.stringify(l))},[l]),(0,n.useEffect)(()=>{let e={};t.forEach(t=>{o[new Date(t.date).getMonth()]===a&&(e[t.category]||(e[t.category]=0),e[t.category]+=t.cost)}),i(e)},[t,a]);let u=(e,t)=>{let s=Number(t.target.value);c(t=>({...t,[a]:{...t[a],[e]:s}}))};return(0,s.jsxs)("div",{className:"budget-tracker",children:[(0,s.jsx)("h3",{className:"budget-tracker-header",children:"Monthly Budget"}),r.map(e=>{var t,n,r;return(0,s.jsxs)("div",{className:"budget-item",children:[(0,s.jsx)("label",{htmlFor:e.name,className:"budget-label",children:e.name}),(0,s.jsx)("input",{type:"number",id:e.name,className:"budget-input",value:(null===(t=l[a])||void 0===t?void 0:t[e.name])||"",onChange:t=>u(e.name,t)}),(0,s.jsxs)("p",{className:"budget-used",children:["Used: $",(null===(n=d[e.name])||void 0===n?void 0:n.toFixed(2))||"0.00"]}),(null===(r=l[a])||void 0===r?void 0:r[e.name])&&(0,s.jsx)("p",{className:"budget-status ".concat(d[e.name]>l[a][e.name]?"over-budget":"under-budget"),children:d[e.name]>l[a][e.name]?"Over Budget":"Under Budget"})]},e.name)})]})},o=()=>{let[e,t]=(0,n.useState)(0),[a,r]=(0,n.useState)(0),[o,u]=(0,n.useState)([]),h=["January","February","March","April","May","June","July","August","September","October","November","December"],[m,x]=(0,n.useState)(h[new Date().getMonth()]),p=()=>{t(e=>e+1)};return(0,n.useEffect)(()=>{(async()=>{let e=await fetch("/api/expenses");u(await e.json())})()},[]),(0,s.jsxs)("div",{className:"expenses-page",children:[(0,s.jsx)("div",{className:"category-container",children:(0,s.jsx)(d,{selectedMonth:m})}),(0,s.jsxs)("div",{className:"main-content",children:[(0,s.jsx)("h1",{className:"header",children:"Expenses"}),(0,s.jsx)("div",{className:"form-container",children:(0,s.jsx)(l,{onExpenseAdded:p})}),(0,s.jsx)("div",{className:"table-container",children:(0,s.jsx)(c,{expenseAdded:e,expenseDeleted:a,onExpenseDeleted:()=>{r(e=>e+1)},onExpenseAdded:p,selectedMonth:m})})]}),(0,s.jsxs)("div",{className:"budget-container",children:[(0,s.jsxs)("div",{className:"month-select-container",children:[(0,s.jsx)("label",{htmlFor:"month-select",children:"Select Month:"}),(0,s.jsx)("select",{id:"month-select",value:m,onChange:e=>{x(e.target.value)},className:"month-select",children:h.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsx)(i,{expenses:o,selectedMonth:m})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(1187)),_N_E=e.O()}]);